{"version":3,"file":"component---src-pages-login-tsx-1844cedf342686d5e6a0.js","mappings":"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","sources":["webpack://skeleton-pip/./node_modules/core-js/internals/a-constructor.js","webpack://skeleton-pip/./node_modules/core-js/internals/new-promise-capability.js","webpack://skeleton-pip/./node_modules/core-js/internals/promise-native-constructor.js","webpack://skeleton-pip/./node_modules/core-js/internals/promise-resolve.js","webpack://skeleton-pip/./node_modules/core-js/internals/species-constructor.js","webpack://skeleton-pip/./node_modules/core-js/modules/es.promise.finally.js","webpack://skeleton-pip/./src/templates/login/LoginTemplate.module.css","webpack://skeleton-pip/./src/templates/templateParts/loginForm/LoginFormTemplate.tsx","webpack://skeleton-pip/./src/templates/templateParts/loginForm/LoginFormTemplate.module.css","webpack://skeleton-pip/./src/templates/login/LoginTemplate.tsx","webpack://skeleton-pip/./src/pages/login.tsx","webpack://skeleton-pip/./src/services/auth.tsx"],"sourcesContent":["var isConstructor = require('../internals/is-constructor');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsConstructor(argument) is true`\nmodule.exports = function (argument) {\n  if (isConstructor(argument)) return argument;\n  throw $TypeError(tryToString(argument) + ' is not a constructor');\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\n\nvar $TypeError = TypeError;\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw $TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable(resolve);\n  this.reject = aCallable(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var anObject = require('../internals/an-object');\nvar aConstructor = require('../internals/a-constructor');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || isNullOrUndefined(S = anObject(C)[SPECIES]) ? defaultConstructor : aConstructor(S);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromiseConstructor = require('../internals/promise-native-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar defineBuiltIn = require('../internals/define-built-in');\n\nvar NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromiseConstructor && fails(function () {\n  // eslint-disable-next-line unicorn/no-thenable -- required for testing\n  NativePromisePrototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = isCallable(onFinally);\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// makes sure that native promise-based APIs `Promise#finally` properly works with patched `Promise#then`\nif (!IS_PURE && isCallable(NativePromiseConstructor)) {\n  var method = getBuiltIn('Promise').prototype['finally'];\n  if (NativePromisePrototype['finally'] !== method) {\n    defineBuiltIn(NativePromisePrototype, 'finally', method, { unsafe: true });\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport var container = \"LoginTemplate-module--container--cce65\";\nexport var content = \"LoginTemplate-module--content--47ebe\";\nexport var header = \"LoginTemplate-module--header--b170e\";","import * as React from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { handleLogin } from \"../../../services/auth\";\nimport { Alert, Button, FormFieldInput } from \"@gemeente-denhaag/components-react\";\nimport { FormField, FormLabel } from \"@utrecht/component-library-react/dist/css-module\";\nimport * as styles from \"./LoginFormTemplate.module.css\";\nimport { useTranslation } from \"react-i18next\";\nimport { InputPassword, InputText } from \"@conduction/components\";\nimport APIService from \"../../../apiService/apiService\";\nimport APIContext from \"../../../apiService/apiContext\";\n\nexport const LoginForm: React.FC = () => {\n  const { t } = useTranslation();\n  const [loading, setLoading] = React.useState<boolean>(false);\n  const [formError, setFormError] = React.useState<string>(\"\");\n  const API: APIService | null = React.useContext(APIContext);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = async (data: any) => {\n    setLoading(true);\n    setFormError(\"\");\n\n    API &&\n      handleLogin(data, API)\n        .catch((err) => {\n          setFormError(err.message);\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n  };\n\n  return (\n    <form className={styles.container} onSubmit={handleSubmit(onSubmit)}>\n      {formError && <Alert text={formError} title={t(\"Oops, something went wrong\")} variant=\"error\" />}\n\n      <FormField>\n        <FormFieldInput>\n          <FormLabel htmlFor={\"\"}>{t(\"Username\")}</FormLabel>\n          <InputText {...{ register, errors }} name=\"username\" validation={{ required: true }} disabled={loading} />\n        </FormFieldInput>\n      </FormField>\n      <FormField>\n        <FormLabel htmlFor={\"\"}>{t(\"Password\")}</FormLabel>\n        <FormFieldInput>\n          <InputPassword {...{ register, errors }} name=\"password\" validation={{ required: true }} disabled={loading} />\n        </FormFieldInput>\n      </FormField>\n\n      <Button size=\"large\" type=\"submit\" disabled={loading}>\n        {t(\"Send\")}\n      </Button>\n    </form>\n  );\n};\n","// extracted by mini-css-extract-plugin\nexport var container = \"LoginFormTemplate-module--container--60402\";","import * as React from \"react\";\nimport * as styles from \"./LoginTemplate.module.css\";\nimport { useTranslation } from \"react-i18next\";\nimport { LoginForm } from \"../templateParts/loginForm/LoginFormTemplate\";\nimport { Heading } from \"@utrecht/component-library-react/dist/css-module\";\n\nexport const LoginTemplate: React.FC = () => {\n  const { t } = useTranslation();\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.content}>\n        <Heading level={1} className={styles.header}>\n          {t(\"Login\")}\n        </Heading>\n        <LoginForm />\n      </div>\n    </div>\n  );\n};\n","import * as React from \"react\";\nimport { LoginTemplate } from \"../templates/login/LoginTemplate\";\n\nconst LoginPage: React.FC = () => <LoginTemplate />;\n\nexport default LoginPage;\n","import { navigate } from \"gatsby-link\";\nimport APIService from \"../apiService/apiService\";\n\nexport interface IUnvalidatedUser {\n  username: string;\n  password: string;\n}\n\nexport const isBrowser = (): boolean => typeof window !== \"undefined\";\n\nexport const handleLogin = async (data: IUnvalidatedUser, API: APIService) => {\n  if (!isBrowser()) return;\n\n  API.setAuthentication(\"TEMPORARY-DUMMY-KEY\");\n  navigate(\"/admin\");\n};\n\nexport const isLoggedIn = (): boolean => {\n  if (!isBrowser()) return false;\n  return !!window.sessionStorage.getItem(\"JWT\");\n};\n\nexport const handleLogout = (API: APIService): void => {\n  if (!isBrowser()) return;\n\n  API.removeAuthentication();\n  navigate(\"/\");\n};\n"],"names":["isConstructor","tryToString","$TypeError","TypeError","module","exports","argument","aCallable","PromiseCapability","C","resolve","reject","this","promise","$$resolve","$$reject","undefined","f","global","Promise","anObject","isObject","newPromiseCapability","x","constructor","promiseCapability","aConstructor","isNullOrUndefined","SPECIES","wellKnownSymbol","O","defaultConstructor","S","$","IS_PURE","NativePromiseConstructor","fails","getBuiltIn","isCallable","speciesConstructor","promiseResolve","defineBuiltIn","NativePromisePrototype","prototype","target","proto","real","forced","call","then","onFinally","isFunction","e","method","unsafe","LoginForm","t","useTranslation","_React$useState","React","loading","setLoading","_React$useState2","formError","setFormError","API","APIContext","_useForm","useForm","register","handleSubmit","errors","formState","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","_callee","data","_context","prev","next","handleLogin","catch","err","message","finally","stop","_x","apply","arguments","_jsxs","className","children","_jsx","Alert","text","title","variant","FormField","FormFieldInput","FormLabel","htmlFor","InputText","name","validation","required","disabled","InputPassword","Button","size","type","LoginTemplate","Heading","level","isBrowser","window","abrupt","setAuthentication","navigate","_x2","handleLogout","removeAuthentication"],"sourceRoot":""}