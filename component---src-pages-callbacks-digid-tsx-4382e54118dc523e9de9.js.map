{"version":3,"file":"component---src-pages-callbacks-digid-tsx-4382e54118dc523e9de9.js","mappings":"8MAmBA,MAfwBA,KACtB,MAAOC,EAAeC,GAAoBC,EAAAA,UAAwB,IAC5D,aAAEC,GCFcC,MACtB,MAAMC,EAAyBH,EAAAA,WAAiBI,EAAAA,GAkBhD,MAAO,CAAEH,aAhBYA,KACnB,MACMI,EADS,IAAIC,gBAAgBC,SAASC,QACCC,IAAI,SAEjD,IAAKJ,EAAgB,OAAO,EAE5B,MAAMK,EAAcC,OAAOC,KAAKP,GAGhC,OADAF,SAAAA,EAAKU,kBAAkBH,IAChB,CAAI,EAOUI,eAJAA,IACb,gGAG6B,EDjBdZ,GAUzB,OARAF,EAAAA,WAAgB,KACdD,EAAiBE,IAAe,GAC/B,IAEHD,EAAAA,WAAgB,KACdF,IAAiBiB,EAAAA,EAAAA,IAAS,IAAI,GAC7B,CAACjB,KAEGkB,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,GAAK,C","sources":["webpack://skeleton-pip/./src/pages/callbacks/digid.tsx","webpack://skeleton-pip/./src/hooks/useDigiD.ts"],"sourcesContent":["import * as React from \"react\";\nimport { navigate } from \"gatsby\";\nimport { useDigiD } from \"../../hooks/useDigiD\";\n\nconst digid: React.FC = () => {\n  const [authenticated, setAuthenticated] = React.useState<boolean>(false);\n  const { authenticate } = useDigiD();\n\n  React.useEffect(() => {\n    setAuthenticated(authenticate());\n  }, []);\n\n  React.useEffect(() => {\n    authenticated && navigate(\"/\");\n  }, [authenticated]);\n\n  return <></>;\n};\n\nexport default digid;\n","import * as React from \"react\";\nimport APIService from \"../apiService/apiService\";\nimport APIContext from \"../apiService/apiContext\";\n\nexport const useDigiD = () => {\n  const API: APIService | null = React.useContext(APIContext);\n\n  const authenticate = () => {\n    const params = new URLSearchParams(location.search);\n    const undecodedToken: string | null = params.get(\"token\");\n\n    if (!undecodedToken) return false;\n\n    const JWT: string = window.atob(undecodedToken);\n\n    API?.setAuthentication(JWT);\n    return true;\n  };\n\n  const getRedirectURL = (): string => {\n    return `${process.env.GATSBY_BASE_URL}/digid/login?returnUrl=${process.env.GATSBY_FRONTEND_URL}/callbacks/digid`;\n  };\n\n  return { authenticate, getRedirectURL };\n};\n"],"names":["digid","authenticated","setAuthenticated","React","authenticate","useDigiD","API","APIContext","undecodedToken","URLSearchParams","location","search","get","JWT","window","atob","setAuthentication","getRedirectURL","navigate","_jsx","_Fragment"],"sourceRoot":""}