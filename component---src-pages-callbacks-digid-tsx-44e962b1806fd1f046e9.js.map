{"version":3,"file":"component---src-pages-callbacks-digid-tsx-44e962b1806fd1f046e9.js","mappings":"0MAmBA,EAfwB,WACtB,ICAMA,EDANC,EAA0CC,EAAAA,UAAwB,GAA3DC,EAAaF,EAAA,GAAEG,EAAgBH,EAAA,GAC9BI,GCDFL,EAAyBE,EAAAA,WAAiBI,EAAAA,GAkBzC,CAAED,aAhBY,WACnB,IACME,EADS,IAAIC,gBAAgBC,SAASC,QACCC,IAAI,SAEjD,IAAKJ,EAAgB,OAAO,EAE5B,IAAMK,EAAcC,OAAOC,KAAKP,GAGhC,OADAP,SAAAA,EAAKe,kBAAkBH,IAChB,CACT,EAMuBI,eAJA,WACrB,MAAUC,+FACZ,IDfQZ,aAUR,OARAH,EAAAA,WAAgB,WACdE,EAAiBC,IACnB,GAAG,IAEHH,EAAAA,WAAgB,WACdC,IAAiBe,EAAAA,EAAAA,IAAS,IAC5B,GAAG,CAACf,KAEGgB,EAAAA,EAAAA,KAAAC,EAAAA,SAAA,GACT,C","sources":["webpack://skeleton-pip/./src/pages/callbacks/digid.tsx","webpack://skeleton-pip/./src/hooks/useDigiD.ts"],"sourcesContent":["import * as React from \"react\";\nimport { navigate } from \"gatsby\";\nimport { useDigiD } from \"../../hooks/useDigiD\";\n\nconst digid: React.FC = () => {\n  const [authenticated, setAuthenticated] = React.useState<boolean>(false);\n  const { authenticate } = useDigiD();\n\n  React.useEffect(() => {\n    setAuthenticated(authenticate());\n  }, []);\n\n  React.useEffect(() => {\n    authenticated && navigate(\"/\");\n  }, [authenticated]);\n\n  return <></>;\n};\n\nexport default digid;\n","import * as React from \"react\";\nimport APIService from \"../apiService/apiService\";\nimport APIContext from \"../apiService/apiContext\";\n\nexport const useDigiD = () => {\n  const API: APIService | null = React.useContext(APIContext);\n\n  const authenticate = () => {\n    const params = new URLSearchParams(location.search);\n    const undecodedToken: string | null = params.get(\"token\");\n\n    if (!undecodedToken) return false;\n\n    const JWT: string = window.atob(undecodedToken);\n\n    API?.setAuthentication(JWT);\n    return true;\n  };\n\n  const getRedirectURL = (): string => {\n    return `${process.env.GATSBY_BASE_URL}/digid/login?returnUrl=${process.env.GATSBY_FRONTEND_URL}/callbacks/digid`;\n  };\n\n  return { authenticate, getRedirectURL };\n};\n"],"names":["API","_React$useState","React","authenticated","setAuthenticated","authenticate","APIContext","undecodedToken","URLSearchParams","location","search","get","JWT","window","atob","setAuthentication","getRedirectURL","process","navigate","_jsx","_Fragment"],"sourceRoot":""}